{% extends 'management/base.html' %}
{% load static %}
<div>Ícones feitos por <a href="https://www.flaticon.com/br/autores/smashicons" title="Smashicons">Smashicons</a> from <a href="https://www.flaticon.com/br/" title="Flaticon">www.flaticon.com</a></div>



{% block dashboad %}

<style>
.helptext
  {
    font-size: 11px;
    color: #85838396;
  }
    .card {
    background-color: #fff;
    border-radius: 10px;
    border: none;
    position: relative;
    margin-bottom: 30px;
    box-shadow: 0 0.46875rem 2.1875rem rgba(90,97,105,0.1), 0 0.9375rem 1.40625rem rgba(90,97,105,0.1), 0 0.25rem 0.53125rem rgba(90,97,105,0.12), 0 0.125rem 0.1875rem rgba(90,97,105,0.1);
}
.l-bg-cherry {
    background: linear-gradient(to right, #493240, #ff0000) !important;
    color: #fff;
}

.l-bg-blue-dark {
    background: linear-gradient(to right, #373b44, #4286f4) !important;
    color: #fff;
}

.l-bg-green-dark {
    background: linear-gradient(to right, #0a504a, #38ef7d) !important;
    color: #fff;
}

.l-bg-orange-dark {
    background: linear-gradient(to right, #a86008, #ffba56) !important;
    color: #fff;
}

.card .card-statistic-3 .card-icon-large .fas, .card .card-statistic-3 .card-icon-large .far, .card .card-statistic-3 .card-icon-large .fab, .card .card-statistic-3 .card-icon-large .fal {
    font-size: 110px;
}

.card .card-statistic-3 .card-icon {
    text-align: center;
    line-height: 50px;
    margin-left: 15px;
    color: #000;
    position: absolute;
    right: -5px;
    top: 20px;
    opacity: 0.1;
}

.l-bg-cyan {
    background: linear-gradient(135deg, #289cf5, #84c0ec) !important;
    color: #fff;
}

.l-bg-green {
    background: linear-gradient(135deg, #23bdb8 0%, #43e794 100%) !important;
    color: #fff;
}

.l-bg-orange {
    background: linear-gradient(to right, #f9900e, #ffba56) !important;
    color: #fff;
}

.l-bg-cyan {
    background: linear-gradient(135deg, #289cf5, #84c0ec) !important;
    color: #fff;
}

.text-right span
{
    font-size: 11px;
    font-weight: 700;
}

.icon-top i
{
    font-size: 40px;
}

.add-despesas:hover
{
    color: #38ef7d!important;
}
th,td
{
  text-align: center;
}


.nav-link:hover
{

  background: none!important;

}

.total:hover
{
  background: #fff!important;
}
</style>

<div style="height: 110px!important;" class="section-header">
    <h5 style="margin-top: -28px; color:#cccccc;" class="position-absolute ml-2 mb-4">Manutenção</h5>
    <br>
    <h1 style="color: #8898aa; font-size: 40px;" class="mt-4 ml-2">Agendamentos</h1>
    <div class="section-header-breadcrumb">       
        <i style="font-size: 70px; color: #000066;" class="far fa-clock-o"></i>
    </div>
    </div>

    <div class="section-body">
        <h2 class="section-title">Lista de Itens para manutenção do referente ao mês {{ data_atual }}</h2>
        <p class="section-lead">
            Lista de progressão dos itens de manutenção períodica.
        </p>
        <div class="row mb-5">
          <div class="col-xl-3 col-lg-6">
          <div class="card card-stats mb-4 mb-xl-0">
            <div class="card-body">
            <div class="row">
              <div class="col">
              <h5 class="card-title text-uppercase text-muted mb-0"><link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
              <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.3.1/css/all.min.css" rel="stylesheet">Valor total</h5>
              {% if valor_total  > 0 %}
              <span class="h2 font-weight-bold mb-0">R$ {{valor_total }}</span>
              {% else %}
              <span class="h2 font-weight-bold mb-0">R$ 0,00</span>
              {% endif %}
              </div>
              <div class="col-auto">
              <div class="icon icon-shape bg-danger text-white rounded-circle shadow">
                <i class="fa fa-dollar"></i>
              </div>
              </div>
            </div>
            <p class="mt-3 mb-0 text-muted text-sm">
              {% if  total_mes_autal > total_mes_passado  %}
              <span class="text-success mr-2"><i class="fa fa-arrow-up"></i> {{ porcetagem_total_mes_atual }}%</span>
              {% elif total_mes_autal < total_mes_passado  %}
              <span class="text-danger mr-2"><i class="fa fa-arrow-down"></i> {{ porcetagem_total_mes_atual }}%</span>
              {% else %}
              <span class="text-dark mr-2">0,00 %</span>
              {% endif  %}
              <span class="text-nowrap">O último mês</span>
            </p>
            </div>
          </div>
          </div>
          <div class="col-xl-3 col-lg-6">
          <div class="card card-stats mb-4 mb-xl-0">
            <div class="card-body">
            <div class="row">
              <div class="col">
              <h5 class="card-title text-uppercase text-muted mb-0">Prevista</h5> 
              {% if manutencao > 0 %}             
              <span class="h2 font-weight-bold mb-0">{{ total_unidades_mes_atual }}</span>
              {% else %}
              <span class="h2 font-weight-bold mb-0">0</span>
              {% endif %}
              </div>
              <div class="col-auto">
              <div class="icon icon-shape bg-warning text-white rounded-circle shadow">
                <i class="fas fa-route"></i>
              </div>
              </div>
            </div>
            <p class="mt-3 mb-0 text-muted text-sm">
              {% if  total_unidades_mes_atual > total_unidades_mes_passado %}
              <span class="text-success mr-2"><i class="fas fa-arrow-up"></i> {{ porcentagem_total_unidade_mes_atual }}%</span>
              {% elif total_unidades_mes_atual < total_unidades_mes_passado %}
              <span class="text-danger mr-2"><i class="fas fa-arrow-down"></i> {{ porcentagem_total_unidade_mes_atual }}%</span>
              {% else %}
              <span class="text-dark mr-2">0,00%</span>
              {% endif %}
              <span class="text-nowrap"> O último mês</span>
            </p>
            </div>
          </div>
          </div>
          <div class="col-xl-3 col-lg-6">
          <div class="card card-stats mb-4 mb-xl-0">
            <div class="card-body">
            <div class="row">
              <div class="col">
              <h5 class="card-title text-uppercase text-muted mb-0">Concluida</h5>
              {% if total_juros_mes_atual > 0%}
              <span class="h2 font-weight-bold mb-0">R$ {{ total_juros_mes_atual }}</span>
              {% else %}
              <span class="h2 font-weight-bold mb-0"> 0</span>
              {% endif %}
              </div>
              <div class="col-auto">
              <div class="icon icon-shape bg-yellow text-white rounded-circle shadow">
                <i class="fas fa-check"></i>
              </div>
              </div>
            </div>
            <p class="mt-3 mb-0 text-muted text-sm">
              {% if  total_juros_mes_atual > total_juros_mes_passado %}
              <span class="text-success mr-2"><i class="fas fa-arrow-up"></i> {{  porcetagem_total_juros_mes_atual }}%</span>
              {% elif  total_juros_mes_atual < total_juros_mes_passado %}
              <span class="text-danger mr-2"><i class="fas fa-arrow-down"></i> {{  porcetagem_total_juros_mes_atual }}%</span>
              {% else %}
              <span class="text-dark mr-2"> 0,00 %</span>
              {% endif %}
              <span class="text-nowrap">O último mês</span>
            </p>
            </div>
          </div>
          </div>
          <div class="col-xl-3 col-lg-6">
          <div class="card card-stats mb-4 mb-xl-0">
            <div class="card-body">
            <div class="row">
              <div class="col">
              <h5 class="card-title text-uppercase text-muted mb-0">Porcentagem</h5>
              {% if porcentagem_unidade_total > 0 %}
              <span class="h2 font-weight-bold mb-0">{{ porcentagem_unidade_total }}%</span>
              {% else %}
              <span class="h2 font-weight-bold mb-0">0,00%</span>
              {% endif %}
              </div>
              <div class="col-auto">
              <div class="icon icon-shape bg-info text-white rounded-circle shadow">
                <i class="fas fa-percent"></i>
              </div>
              </div>
            </div>
            <p class="mt-3 mb-0 text-muted text-sm">
              {% if porcentagem_unidade_total >   porcentagem_total_unidades_mes_passado %}
              <span class="text-success mr-2"><i class="fas fa-arrow-up"></i> {{ porcentagem_porcentagem_unidade_mes_atual }}%</span>
              {% elif porcentagem_unidade_total <   porcentagem_total_unidades_mes_passado %}
              <span class="text-danger mr-2"><i class="fas fa-arrow-down"></i> {{ porcentagem_porcentagem_unidade_mes_atual }}%</span>
              {% else %}
              <span class="text-dark mr-2"> 0,00%</span>
              {% endif %}
              <span class="text-nowrap">O último mês</span>
            </p>
            </div>
          </div>
          </div>         
       </div>
       <div class="col-md-12  mt-5 mb-5">
        <div class="row">            
            <div class="col-md-12">
                <a href=""><div class=" float-left icon-top text-dark add-despesas" data-toggle="tooltip" data-placement="top" title="Voltar"></div></a> 
               <a href="{% url 'manutencao:agendamento' %}"><div class=" float-right icon-top text-dark add-despesas" data-toggle="tooltip" data-placement="top" title="Agendar Manutenção"><i class="fas fa-plus"></i></div></a> 
            </div>
        </div>  
        </div>
       <div class="row">
        <div class="col-md-12">
          <div class="card mb-5 l-bg-blue-dark">
              <div class="card-body">
                <ul class="nav nav-pills">
                  <li class="nav-item">
                    {% if total > 0 %}
                    <a class="nav-link total bg-white text-dark" href="#">Total <span class="badge badge-dark text-white">{{ total }}</span></a>
                    {% else %}
                    <a class="nav-link total bg-white text-dark" href="#">Total <span class="badge badge-dark text-white">0</span></a>
                    {% endif %}
                  </li>
                  <li class="nav-item">
                    {% if preventiva > 0 %}
                    <a class="nav-link text-white" href="#">Preventiva<span class="badge badge-white text-dark">{{ pagas }}</span></a>
                    {% else %}
                    <a class="nav-link text-white" href="#">Preventiva<span class="badge badge-white text-dark">0</span></a>
                    {% endif %}
                  </li>
                  <li class="nav-item">
                    {% if preditiva > 0 %}
                    <a class="nav-link text-white" href="#">Preditiva<span class="badge badge-white text-dark">{{ preditiva  }}</span></a>
                    {% else %}
                    <a class="nav-link text-white" href="#">Preditiva<span class="badge badge-white text-dark">0</span></a>
                    {% endif %}
                  </li>
                  <li class="nav-item">
                    {% if corretiva > 0 %}
                    <a class="nav-link text-white" href="#">Corretiva<span class="badge badge-white text-dark">{{ corretiva }}</span></a>
                    {% else %}
                    <a class="nav-link text-white" href="#">Corretiva<span class="badge badge-white text-dark">0</span></a>
                    {% endif %}
                  </li>
                </ul>
              </div>
          </div>
          <div class="card mt-5">
            <div class="card-header">
              <h4>Agendamento de Manutenção</h4>
              <div class="card-header-action">
                <a href="{% url 'financeiro:inadinplencias_anual' %}" class="btn btn-danger">Ver todos <i class="fas fa-chevron-right"></i></a>
              </div>
            </div>
            <div class="card-body p-0">
              <div class="table-responsive table-invoice">
                <table class="table table-striped">
                  <tr>                  
                    <th>Tipo</th>
                    <th>Periodicidade</th>                             
                    <th>Fornecedor</th>
                    <th>Responsável</th>
                    <th>Data </th>
                    <th>Previsão</th>
                    <th>Status</th>
                    <th>valor</th>
                  </tr>                 
                  <tr>                      
                    {% for manutencao in manutencoes %}                    
                    <td><a href="{% url  'manutencao:item' manutencao.id %}">{{ manutencao.tipo | title }}</a></td>
                    <td>{{ manutencao.periodicidade | title }}</td>
                    <td>{{ manutencao.fornecedor | title }}</td>
                    <td>{{ manutencao.responsavel | truncatechars:11 | title }}</td>
                    <td>{{ manutencao.data_inicial | date:"d/m/Y" }}</td>
                    <td>{{ manutencao.data_inicial | date:"d/m/Y" }}</td>
                    <td>
                      {% if manutencao.status == 'pendente' %}
                      <span class="badge badge-warning">{{ manutencao.status| title }}</span>
                      {% elif manutencao.status == 'não realizada' %}
                      <span class="badge badge-danger">{{ manutencao.status| title }}</span>
                      {% else %}
                      <span class="badge badge-success">{{ manutencao.status| title }}</span>
                      {% endif %}
                    </td>
                    <td >R$ {{ manutencao.valor_total }}</td>
                    {% endfor %}                                            
                  </tr>                
                </table>
              </div>
            </div>
          </div>  
        </div>
    </div>
       
    </div> 




{% endblock %}